<nav class="navbar fixed-top">
  <div class="profile-container" (click)="toggleMenu($event)">

    @if (auth.user$ | async; as user) {
      <span class="username">{{ user.displayName }}</span>
    }

    <img class="avatar"
         [src]="(auth.user$ | async)?.photoURL || 'assets/avatar.png'"
         (error)="handleAvatarError($event)"
         alt="" />

    @if (menuOpen) {
      <div class="dropdown" (click)="$event.stopPropagation()">
        <button (click)="goToProfile()">
          <i class="bi bi-person"></i> Profile
        </button>
        <button (click)="goToSettings()">
          <i class="bi bi-gear"></i> Settings
        </button>
        <hr />
        <button class="logout" (click)="logout()">
          <i class="bi bi-power"></i> Logout
        </button>
      </div>
    }
  </div>
</nav>
